###### [Назад](README.md)
# Документация
### Оглавление
- [Класс `AbsoluteSolver`](#класс-absolutesolver)
    - [Описание](#описание)
    - [Референс API](#референс-api)
- [Референс команд FMBF](#референс-команд-fmbf)

# Класс `AbsoluteSolver`
### Описание
Вот как он выглядит, в общих чертах:
![Bagger 288 in the Garzweiler open-cast lignite mine](https://upload.wikimedia.org/wikipedia/commons/6/6a/Bagger-garzweiler.jpg)
Он управляет всеми ботами Майнкрафта, подключёнными к нему.<br>
Как только экземпляр этого класса создаётся - 

```python
solver = AbsoluteSolver()
```
\- то он тут же начинает работать в фоне, выискивая ботов Майнкрафта до тех пор, пока программа не завершится. Поэтому важно добавить
```python
while True:
    pass
```
в конце файла, чтобы `AbsoluteSolver` не завершал работу сразу после конца команд.

### Референс API
*`класс`* `AbsoluteSolver(ip='127.0.0.1', port=2323, debug=False, info=False)`
Аргументы | Методы
--------:|:-----
[ip](#аргумент-ip) | [add](#аргумент-program)
[port](#аргумент-port) | [close](#метод-close)
[debug](#аргумент-debug) |
[info](#аргумент-info) |

#### *`аргумент`* `ip`
IP-адрес программы. Программа должна быть на одном компьютере или связана LAN-сетью с ботом Майнкрафта.<br>
**Тип:** Строка<br>
**По умолчанию:** `'127.0.0.1'`

#### *`аргумент`* `port`
Порт для входящих соединений программы. Должен совпадать с портом программы в конфиге Майнкрафт-мода. <br>
**Тип:** Число от `1` до `65535`<br>
**По умолчанию:** `2323`

#### *`аргумент`* `debug`
Режим отладки. Включает отображение информации о занятых потоках и подключении ботов.<br>
**Тип:** Булева переменная<br>
**По умолчанию:** `False`

#### *`аргумент`* `info`
Режим слабой отладки. Включает отображение информации о трансфере данных между ботами и сервером.<br>
**Тип:** Булева переменная<br>
**По умолчанию:** `False`

#### *`метод`* `add(program, name=None)`
Разрешает боту с определённым никнеймом подключаться к инстанции `AbsoluteSolver`, также привязывая к нему *алгоритм поведения*.
##### *`аргумент`* `program`
*Алгоритм поведения*. Функция, которая на вход принимает данные, которые может прислать Майнкрафт-бот, а возвращает *команду*, которую должен этот Майнкрафт-бот выполнить.

**Пример:**
```python
def program(Object):
    print(Object)
    return 'куда смотришь'
```
Функция `program` вызывается каждый раз, когда от Майнкрафт-бота приходят данные. Данные же Майнкрафт-бот отправляет, когда к нему приходит текстовая *команда*, например, `'куда смотришь'`. Все команды и то, как Майнкрафт-бот может на них ответить, вы можете посмотреть в [Референсе команд FMBF](#референс-команд-fmbf).<br>
**Тип:** _ProgramCallable<br>

##### *`аргумент`* `name`
Никнейм, игровое имя пользователя Майнкрафт, которого требуется привязать к алгоритму выполнения.
Если этот аргумент не указан, или указан в значении None, то за его значение берётся ***название функции, переданной в аргумент `program`***.<br>
**Тип:** str|None<br>
**По умолчанию:** None<br>


#### *`метод`* `close()`
Останавливает поток работы AbsoluteSolver, в том числе и все потоки его соединений с ботами.


# Референс команд FMBF
- [спи](#спи)
- [какие блоки рядом](#какие-блоки-рядом)
- [какие сущности рядом](#какие-сущности-рядом)
- [на что смотришь](#на-что-смотришь)
- [где ты](#где-ты)
- [куда смотришь](#куда-смотришь)

[Другое](#другое)

## `спи`
Пустая команда.

**Результат:** ничего, кроме `ctx` и `code`, не возвращает.<br>
**Пример:* 
```python
ctx: "спи"
code: 0
```
Действие: ничего не делает.

## `какие блоки рядом`
Возвращает информацию обо всех блоках в радиусе 4 блоков от ног игрока.

**Результат:** возвращает массив словарей под названием `blocks`. Каждый словарь означает информацию об одном (1) блоке: в них хранятся поля `id`, `x`, `y` и `z`.<br>
**Пример:**
```python
ctx: "какие блоки рядом"
blocks: [
    {
        "id": "minecraft:grass_block",
        "x": 10,
        "y": 70,
        "z": 5
    },
    {
        "id": "minecraft:grass_block", 
        "x": 10, 
        "y": 70,
        "z": 6
    },
    ...
]
code: 0
```
**Действие:** ничего не делает.

## `какие сущности рядом`
Возвращает информацию обо всех сущностях в радиусе 5 блоков от ног игрока.

**Результат:** возвращает массив словарей под названием `entities`. Каждый словарь означает информацию об одной (1) сущности: в них хранятся поля `id`, `x`, `y` и `z`.<br>
**Пример:**
```python
ctx: "какие сущности рядом"
entities: [
    {
        "id": "minecraft:creeper",
        "x": 20,
        "y": 73,
        "z": 23
    },
    ...
]
code: 0
```
**Действие:** ничего не делает.

## `на что смотришь`
Сообщает ближайшее то, на что смотрит игрок. Если это блок или сущность, то сообщает его идентификатор (`Id`) и расстояние до него (`distance`). 

**Результат:** возвращает строку `Type`, и если она равна `воздух`, то всё. А если она равна `блок` или `сущность`, то команда также возвращает строку `Id` и число `distance`.<br>
**Примеры:**
```python
ctx: "на что смотришь"
Object: "блок"
Id: "minecraft:grass_block"
distance: 12.5
code: 0
```
```python
ctx: "на что смотришь"
Object: "воздух"
code: 0
```
**Действие:** ничего не делает.

## `где ты`
Сообщает координаты игрока. 

**Результат:** возвращает позицию ног игрока через `x`, `y` и `z`.<br>
**Пример:**
```python
ctx: "где ты"
x: 15
y: 44
z: 1023
code: 0
```
**Действие:** ничего не делает.


## `куда смотришь`
Сообщает поворон и наклон головы игрока
**Результат:** возвращает угол поворота головы игрока (`x`) и угол наклона его головы (`y`).<br>
**Пример:**
```python
ctx: "куда смотришь"
x: 155
y: 44
code: 0
```
**Действие:** ничего не делает.

## Другое
Если команда не была распознана Майнкрафтом как известная, он ничего не делает, и возвращает название команды, но в этот раз `code` равен 1. Всевозможные значения `code` описаны ниже.<br>
**Примеры:**
```python
ctx: "сппть"
code: 1
``` 
```python
ctx: "куад сотришь"
code: 1
``` 

| номер | описание
| :---: | :------:
|     0 | успех
|     1 | неизвестная команда


###### Изображение "[Bagger 288 в карьере Гарцвайлер](https://commons.wikimedia.org/wiki/File:Bagger-garzweiler.jpg)" распространяется под лицензией [Creative Commons Attribution-Share Alike 2.5 Generic](https://creativecommons.org/licenses/by-sa/2.5/deed.en).